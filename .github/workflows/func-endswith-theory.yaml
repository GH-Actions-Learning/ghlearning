âœ… 1. What is endsWith()?
endsWith() is a GitHub Actions expression function that checks whether a string ends with a specific suffix.

âœ… 2. Syntax

endsWith(string, searchString)

string: The full string to check

searchString: The suffix you want to check for

ğŸ” Returns: true or false

âœ… 3. Real-World Use Cases

| Use Case                                             | Description                   |
| ---------------------------------------------------- | ----------------------------- |
| Check if a branch ends in a specific keyword         | e.g., `refs/heads/feature-ui` |
| Check if a filename ends in `.yml` or `.json`        |                               |
| Check if a tag ends in `-beta` for pre-release       |                               |
| Input suffix validation (e.g., `-eu`, `-us`, `-dev`) |                               |

âœ… 4. Simple Example

if: ${{ endsWith(github.ref, '/production') }}

âœ”ï¸ True if the branch or tag ends with /production

âœ… 5. Extended Workflow Example

name: Deploy endsWith Example

on:
  workflow_dispatch:
    inputs:
      region:
        description: 'Region (like app-us, app-eu, app-dev)'
        required: true
        default: 'app-eu'

jobs:
  deploy:
    runs-on: ubuntu-latest
    if: ${{ endsWith(inputs.region, '-eu') }}

    steps:
      - name: Deploy to Europe
        run: echo "Deploying to Europe: ${{ inputs.region }}"

ğŸ’¡ This job will only run when inputs.region ends with -eu.

âœ… 6. Another Example â€” File Extension Filter

name: Check file type

on:
  push:
    paths:
      - '**.json'
      - '**.yml'

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - name: Check file extension
        run: |
          echo "Checking if file ends in .json or .yml"
          
While file filtering is better handled in on.push.paths, you can use endsWith() inside custom logic too.

âœ… 7. Combine with Other Expressions

Check if tag ends with -beta and starts with v

if: ${{ startsWith(github.ref, 'refs/tags/v') && endsWith(github.ref, '-beta') }}

âœ… Matches tags like refs/tags/v1.2.0-beta

âœ… 8. Parameters & Explanation

| Parameter      | Description                           |
| -------------- | ------------------------------------- |
| `string`       | The full value to test                |
| `searchString` | The ending substring to match against |

âœ… 9. Where NOT to Use

| âŒ Donâ€™t use for:                         | Why                                           |
| ---------------------------------------- | --------------------------------------------- |
| Matching substrings anywhere in a string | Use `contains()` instead                      |
| Case-insensitive comparisons             | `endsWith()` is case-sensitive                |
| Complex file filtering                   | Use `on.push.paths` instead for that use case |


âœ… 11. Bonus: Multiple Condition Example

if: ${{ github.event_name == 'workflow_dispatch' && endsWith(inputs.environment, '-prod') }}

âœ”ï¸ Run only if the workflow was manually triggered AND the input ends in -prod



---------

âœ… 1. Tag-Based Deployments for Beta Releases

â–¶ï¸ Trigger job only for tags ending in -beta

if: ${{ startsWith(github.ref, 'refs/tags/') && endsWith(github.ref, '-beta') }}

âœ… Real Tag Example:

refs/tags/v1.2.3-beta â†’ âœ…

refs/tags/v1.2.3 â†’ âŒ

ğŸ”§ Use Case: Only deploy beta builds to staging environments.

âœ… 2. Hotfix Branches Ending in a Component Name

â–¶ï¸ Build only if branch ends in -auth

if: ${{ startsWith(github.ref, 'refs/heads/hotfix/') && endsWith(github.ref, '-auth') }}

âœ… Real Branch Example:

refs/heads/hotfix/login-auth â†’ âœ…

refs/heads/hotfix/payment-api â†’ âŒ

ğŸ”§ Use Case: Run targeted tests or builds only for authentication-related hotfixes.

âœ… 3. Environment Name Ends in Region (Manual Trigger)

â–¶ï¸ Deploy only if environment input ends in -us

if: ${{ endsWith(inputs.environment, '-us') }}

âœ… Real Input Example:

prod-us â†’ âœ…

prod-eu â†’ âŒ

ğŸ”§ Use Case: Run deployment steps for US region only (e.g., region-specific infra).

âœ… 4. Matrix Job Filter: OS name ends with -lts

â–¶ï¸ Filter out only long-term support runners in a matrix:

if: ${{ endsWith(matrix.os, '-lts') }}
strategy:
  matrix:
    os: [ubuntu-latest, ubuntu-lts, windows-latest, windows-lts]

ğŸ”§ Use Case: Only run certain jobs (e.g., security scans) on stable LTS operating systems.

âœ… 5. Filename Suffix Check (Using env or steps with scripts)

â–¶ï¸ Manually check in shell script if a file ends in .yml

- name: Check file extension
  run: |
    FILE=config/build.yml
    if [[ "$FILE" == *.yml ]]; then
      echo "This is a YAML file."
    fi

GitHub Actions expressions can't directly loop over file names in if: â€” but you can use endsWith() in env: values or inline script conditions if needed.

âœ… 6. Job Dispatch Validation with Input Ending in Tier

â–¶ï¸ Run step if selected plan ends in -pro

if: ${{ endsWith(inputs.plan, '-pro') }}

âœ… Real Input:

enterprise-pro â†’ âœ…

starter-plan â†’ âŒ

ğŸ”§ Use Case: Enable extra audit steps for pro plan users.

âœ… 7. Conditionally Skipping PR Checks for Docs Branches

if: ${{ !endsWith(github.ref, '-docs') }}

âœ… Run all tests except on branches like feature/login-docs

ğŸ”§ Use Case: Avoid running full CI on doc-only updates.

âœ… 8. Publish Only Final Reports Ending in .pdf

if: ${{ endsWith(steps.generate.outputs.report_file, '.pdf') }}

âœ… Only uploads .pdf files and skips .html or .txt