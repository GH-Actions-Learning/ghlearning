name: concurrency test 6

on:
  workflow_dispatch:

# Job level concurrency 

jobs:
  build:
    runs-on: ubuntu-latest
    concurrency:
      group: test1
      cancel-in-progress: true
    steps:
      - run: |
          echo "ğŸ—ï¸ Building... ${{ github.workflow }}-${{ github.ref }}-${{github.run_number}}"
          sleep 60

  deploy:
    runs-on: ubuntu-latest
    concurrency:
      group: test1
      cancel-in-progress: true
    steps:
      - run: |
          echo "ğŸš€ Deploying...${{ github.workflow }}-${{ github.ref }}-${{github.run_number}}"
          sleep 60


# âœ… Here's what will happen:
#  If triggerd one Time
#
# ğŸ’¥ Only one job (either build or deploy) will run â€” the other will get canceled.
#
# The outcome is nondeterministic â€” GitHub does not guarantee job start order
# in parallel workflows without `needs:`.

#--------------------------------
# ğŸ¤” What happens if I trigger this workflow 4 times simultaneously,
# where each run contains two jobs (`build` and `deploy`), and both jobs
# use the same concurrency group (`test1`)?
#
# âœ… Outcome:
# - 7 jobs get canceled
# - 1 job finishes successfully
#
# â“ Which job succeeds?
# â†’ Totally depends on race conditions / GitHubâ€™s job queue timing.
