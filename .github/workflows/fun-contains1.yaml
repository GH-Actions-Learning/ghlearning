ğŸ”¹ 1. What is contains() in GitHub Actions?
The contains() function checks whether a string or an array contains a given value. Itâ€™s used in GitHub Actions to control logic in conditionals (if:), filter workflow behavior, and validate content.

ğŸ§  2. Syntax

${{ contains(search, item) }}

search: a string or array/list

item: a value to check for inside the search

Returns: true or false

ğŸ“˜ 3. Basic Examples

ğŸ”¹ Check if a string contains a substring

if: ${{ contains(github.ref, 'feature') }}

âœ… This condition is true if the branch name (e.g., refs/heads/feature/login) contains the word feature.

ğŸ”¹ Check if an array contains an item

if: ${{ contains(['dev', 'stage', 'prod'], 'prod') }}

âœ… This returns true.

ğŸ” 4. Different Use Cases (with Examples)

âœ… a. Run a job only for bot users

if: ${{ contains(github.actor, 'bot') }}

âœ… b. Validate if an environment is production

if: ${{ contains(env.ENVIRONMENT, 'prod') }}

âœ… c. Check if the triggered event is a pull request

if: ${{ contains(github.event_name, 'pull_request') }}

âœ… d. Conditionally run steps for specific environments

if: ${{ contains(['qa', 'staging', 'production'], env.ENVIRONMENT) }}

âš™ï¸ 5. Parameters Explained

| Parameter | Description                               | Required? | Type            | Example                                           |
| --------- | ----------------------------------------- | --------- | --------------- | ------------------------------------------------- |
| `search`  | The string or array you want to search in | âœ… Yes     | string or array | `"refs/heads/feature/login"` or `['dev', 'prod']` |
| `item`    | The value you want to search for          | âœ… Yes     | string          | `'feature'`                                       |

ğŸ”¸ From Matrix

if: ${{ contains(matrix.os, 'ubuntu') }}

Checks if ubuntu is in the matrix.os array.

ğŸ”¸ From Contexts (e.g., environment variables)

if: ${{ contains(env.DEPLOY_TARGET, 'staging') }}

ğŸ”¸ Inside expressions

- name: Run only if feature branch

  if: ${{ contains(github.ref, 'feature/') && success() }}

âœ… Option 1: Use || (OR)

if: ${{ contains(['dev', 'stage', 'prod'], 'prod') || contains(['dev', 'stage', 'prod'], 'uat') }}

This checks each item separately.

âœ… Option 2: Use a custom step with fromJson() and join() (advanced)

If you're dealing with long lists dynamically, you might want to loop or use a custom action instead. But for simple checks, Option 1 is best.

| Usage                         | Valid? | Explanation                                  |
| ----------------------------- | ------ | -------------------------------------------- |
| `contains(['a', 'b'], 'a')`   | âœ…      | Checks if `'a'` is in the list               |
| `contains(['a', 'b'], ['a'])` | âŒ      | Second argument must be a string             |
| `contains('abc', 'b')`        | âœ…      | Checks if `'b'` is a substring               |
| `contains('abc', ['b'])`      | âŒ      | Second argument must be a string, not a list |
