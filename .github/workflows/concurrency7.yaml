name: concurrency test 7

on:
  workflow_dispatch:

# Job level concurrency 

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - run: |
          echo "ðŸ—ï¸ Building... ${{ github.workflow }}-${{ github.ref }}-${{github.run_number}}"
          sleep 60

  deploy:
    runs-on: ubuntu-latest
    needs: build
    concurrency:
      group: test1
      cancel-in-progress: true
    steps:
      - run: |
          echo "ðŸš€ Deploying...${{ github.workflow }}-${{ github.ref }}-${{github.run_number}}"
          sleep 60


# âœ… Here's what will happen:
#  If triggerd one Time
#
# ðŸ’¥ Since it had Needs on 2nd job which is depends on first it will execute fine
#

#--------------------------------
# ðŸ¤” What happens if I trigger this workflow 4 times simultaneously,
# where each run contains two jobs (`build` and `deploy`), and both jobs
# use the same concurrency group (`test1`)?
#
# âœ… Outcome:
# ðŸ•’ Time â†’
# [Run #1] build â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> deploy â”€â”€â”€â”€â”€â”
#                                        â•² (canceled)
# [Run #2] build â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> deploy â”€â”€â”€â”€â”€â”
#                                        â•² (canceled)
# [Run #3] build â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> deploy â”€â”€â”€â”€â”€â”
#                                        â•² (canceled)
# [Run #4] build â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> deploy â”€â”€â”€â”€â”€âœ… (runs completely)
